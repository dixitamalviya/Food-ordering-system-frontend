

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information with Invoice</title>
    <link rel="stylesheet" href="bill.css">
    <link rel="license" href="https://www.opensource.org/licenses/mit-license/">
    <script src="bill.js" defer></script>
    <style>
        @media (max-width: 600px) {
            .container {
                width: 100%;
            }
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            max-width: auto;
            height: auto;
            margin: auto;
        }
        form {
            
            max-width: auto;
            height: auto;
            margin: auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
        }
        label {
            display: block;
            margin-bottom: 8px;
        }
        input, select {
            width: 97%;
            padding: 8px;
            margin-bottom: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            width: 97%;
            padding: 10px;
            background-color: #185997;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #185997;
        }
        .error {
            color: red;
            margin-bottom: 16px;
        }
    </style>
    <!-- <script>
        document.getElementById('checkoutButton').addEventListener('click', function () {
     const formData = {
         fullName: document.getElementById('fullName').value,
         course: document.getElementById('course').value,
         semester: document.getElementById('semester').value,
         enrollmentNumber: document.getElementById('enrollmentNumber').value,
         email: document.getElementById('email').value,
         phone: document.getElementById('phone').value,
         items: getItems(), // Function to get order items, quantity, and price
         totalPrice: document.getElementById('totalPrice').innerText // Total price shown in the page
     };
 
     // // Check if all required fields are filled
     // if (!formData.fullName || !formData.course || !formData.semester || !formData.enrollmentNumber || !formData.email || !formData.phone || !formData.items.length) {
     //     alert('Please fill out all required fields and add items to the order.');
     //     return;
     // }
 
     fetch('bill.php', {  // Make sure this points to your actual PHP file location
         method: 'POST',
         headers: {
             'Content-Type': 'application/json'
         },
         body: JSON.stringify(formData)
     })
     .then(response => response.json())
     .then(data => {
         if (data.success) {
             alert('Checkout successful! Your data has been saved.');
         } else {
             alert('Error: ' + data.error);
         }
     })
     .catch((error) => {
         console.error('Error:', error);
         alert('There was an error during the checkout process.');
     });
 });
 
 // Function to collect items from the order table
 function getItems() {
     const items = [];
     document.querySelectorAll('#items tr').forEach(row => {
         const item = {
             name: row.querySelector('td:nth-child(1)').textContent,
             rate: row.querySelector('td:nth-child(2)').textContent,
             quantity: row.querySelector('td:nth-child(3)').textContent,
             price: row.querySelector('td:nth-child(4)').textContent
         };
         items.push(item);
     });
     return items;
 }
 
     </script> -->
</head>
<body>
    <article>
        <address contenteditable>
            <p>Smart Canteen<br>Information and Bill</p>
        </address>
        <table class="meta">
            <tr>
                <th><span contenteditable>Date</span></th>
                <td><span id="invoiceDate"></span></td>
            </tr>
        </table>
    </article>
    <header>
        <h1>Information and Order</h1>
        <address contenteditable>
            <h3>GLS University</h3>
        </address>
    </header>
    <form id="feedbackForm" action="bill.php" method="POST">
        <div id="errorMessages" class="error"></div>
        <label for="fullName">Full Name:</label>
        <input type="text" id="fullName" name="fullName" required>

        <label for="enrollmentNumber">Enrollment Number:</label>
        <input type="text" id="enrollmentNumber" name="enrollmentNumber" pattern="\d{15}" title="Enrollment number should be 15 digits" required>
        
        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" pattern="\d{10}" title="Phone number should be 10 digits" required>
    
    <article>
        <h1>Recipient</h1>
        <table class="inventory">
            <thead>
                <tr>
                    <th><span contenteditable>Item</span></th>
                    <th><span contenteditable>Rate</span></th>
                    <th><span contenteditable>Quantity</span></th>
                    <th><span contenteditable>Price</span></th>
                </tr>
            </thead>
            <tbody id="items">
                <!-- Items will be dynamically added here -->
            </tbody>
        </table>
        <a class="add" href="menu.html" onclick="redirectToMenu()">+</a>
        <table class="balance">
            <tr>
                <th><span contenteditable>Total</span></th>
                <td><span data-prefix="â‚¹"></span><span id="totalPrice">0.00</span></td>
            </tr>
        </table>
        <button type="submit" id="checkoutButton">Checkout</button>
    </article>
</form>
</body>

</html>